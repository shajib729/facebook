(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{107:function(e,t,s){},109:function(e,t,s){},110:function(e,t,s){},116:function(e,t,s){},117:function(e,t,s){},118:function(e,t,s){},120:function(e,t,s){},121:function(e,t,s){},122:function(e,t,s){},123:function(e,t,s){},124:function(e,t,s){},125:function(e,t,s){},126:function(e,t,s){},127:function(e,t,s){},158:function(e,t,s){"use strict";s.r(t);var n=s(0),a=s.n(n),c=s(14),r=s.n(c),i=(s(107),s(17)),o=s(16),l=s(6),j=s.n(l),d=s(11),u=s(34),p=s(22),b=s(8),m=(s(109),s(215)),h=s(217),O=s(216),x=s(191),f=s(192),g=(s(110),s(187)),v=s(25),N=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,token:null,isFecthing:!0,error:!1};case"LOGIN_SUCCESS":return{token:t.payload.token,user:t.payload.id,isFecthing:!1,error:!1};case"LOGIN_FAILURE":return{user:null,token:null,isFecthing:!1,error:t.payload};case"USER_LOGOUT":return localStorage.removeItem("myToken"),{user:null,token:null,isFecthing:!1,error:null};case"RE_RENDER":return Object(p.a)(Object(p.a)({},e),{},{isFecthing:t.payload});default:return e}},y=s(87),I=s(1),w={token:"",user:null,isFecthing:!1,error:!1,message:null},C=function(e){var t=Object(y.a)(e),s=new Date(1e3*t.exp);if(!(new Date>s))return t;localStorage.removeItem("myToken")},k=localStorage.getItem("myToken");if(k){var S=C(k);if(w.token=k,S.id){var T=S.id;w.user=T||null}}var E=Object(n.createContext)(),L=function(e){var t=e.children,s=Object(n.useReducer)(N,w),a=Object(b.a)(s,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("myToken");if(e){var t=C(e);if(w.token=e,console.log(t),t.id){var s=t.id;w.user=s||null,console.log(w.user)}}}),[k]),Object(I.jsx)(E.Provider,{value:{token:c.token,user:c.user,isFecthing:c.isFecthing,error:c.error,dispatch:r},children:t})},R=function(e){var t=e.handlePopup,s=e.setHandlePopup,a=Object(n.useContext)(E),c=(a.user,a.dispatch),r=Object(n.useState)({username:"",email:"",password:"",cpassword:"",date:""}),i=Object(b.a)(r,2),o=i[0],l=i[1],N=function(e){l(Object(p.a)(Object(p.a)({},o),{},Object(u.a)({},e.target.name,e.target.value)))},y=function(){var e=Object(d.a)(j.a.mark((function e(t){var s,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});case 3:return s=e.sent,e.next=6,s.json();case 6:n=e.sent,console.log(n),200==s.status?(v.b.success(n.message,{style:{padding:"10px",color:"#fff",fontSize:"16px",background:"#62D346"},iconTheme:{primary:"white",secondary:"#62D346"}}),setTimeout((function(){c({type:"LOGIN_SUCCESS",payload:n}),localStorage.setItem("myToken",n.token)}),2e3)):(c({type:"LOGIN_FAILURE",payload:n.error}),v.b.error(n.error.username||n.error.email||n.error.password||n.error.cpassword||n.error,{style:{padding:"10px",color:"#fff",fontSize:"16px",background:"red"},iconTheme:{primary:"white",secondary:"red"}}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=Object(n.useState)(!1),C=Object(b.a)(w,2),k=C[0],S=C[1];return Object(I.jsx)("div",{className:t?"signupContainer":"hide signupContainer",children:Object(I.jsxs)("div",{className:"signupBox",children:[Object(I.jsx)(g.a,{className:"hideSignup",onClick:function(){return s(!1)}}),Object(I.jsx)("h4",{className:"signupTitle",children:"Sign Up"}),Object(I.jsx)("p",{className:"signupDesc",children:"It's quick and easy"}),Object(I.jsx)("hr",{}),Object(I.jsxs)("form",{onSubmit:y,autoComplete:"off",className:"signupForm",children:[Object(I.jsx)(m.a,{className:"fields",id:"outlined-basic",label:"Full Name",type:"text",autoComplete:"off",variant:"outlined",name:"username",onChange:N}),Object(I.jsx)(m.a,{className:"fields",id:"outlined-basic",label:"Email",type:"email",autoComplete:"off",variant:"outlined",name:"email",onChange:N}),Object(I.jsxs)("div",{className:"fields",children:[Object(I.jsx)(m.a,{id:"outlined-password-input",label:"Password",type:k?"text":"password",autoComplete:"off",variant:"outlined",name:"password",onChange:N}),Object(I.jsx)(h.a,{onClick:function(){return S(!k)},control:Object(I.jsx)(O.a,{icon:Object(I.jsx)(x.a,{}),checkedIcon:Object(I.jsx)(f.a,{})})})]}),Object(I.jsx)("div",{className:"fields",children:Object(I.jsx)(m.a,{id:"outlined-password-input",label:"Confirm Password",type:k?"text":"password",autoComplete:"off",variant:"outlined",name:"cpassword",onChange:N})}),Object(I.jsx)("div",{className:"fields birthDay",children:Object(I.jsx)(m.a,{id:"date",label:"Birthday",type:"date",name:"date",InputLabelProps:{shrink:!0},onChange:N})}),Object(I.jsx)("input",{className:"signupButton",type:"submit",value:"Sign Up"})]})]})})},F=s(35),B=function(){var e=Object(n.useContext)(E),t=(e.user,e.dispatch),s=(Object(i.g)(),Object(n.useState)(!1)),a=Object(b.a)(s,2),c=a[0],r=a[1],l=Object(n.useState)({email:"",password:""}),g=Object(b.a)(l,2),N=g[0],y=g[1],w=function(e){y(Object(p.a)(Object(p.a)({},N),{},Object(u.a)({},e.target.name,e.target.value)))},C=function(){var e=Object(d.a)(j.a.mark((function e(s){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.preventDefault(),e.next=3,fetch("/api/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(N)});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,console.log(a),200==n.status?(v.b.success(a.message,{style:{padding:"10px",color:"#fff",fontSize:"16px",background:"#62D346"},iconTheme:{primary:"white",secondary:"#62D346"}}),setTimeout((function(){t({type:"LOGIN_SUCCESS",payload:a}),localStorage.setItem("myToken",a.token)}),2e3)):400===n.status&&(console.log(a.error),v.b.error(a.error,{style:{padding:"10px",color:"#fff",fontSize:"16px",background:"red"},iconTheme:{primary:"white",secondary:"red"}}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=Object(n.useState)(!1),S=Object(b.a)(k,2),T=S[0],L=S[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(v.a,{position:"top-center",reverseOrder:!1}),Object(I.jsxs)("div",{className:"loginContainer",children:[Object(I.jsx)(F.a,{children:Object(I.jsx)("title",{children:"Login Page"})}),Object(I.jsxs)("div",{className:"loginWrapper",children:[Object(I.jsxs)("div",{className:"loginLeft",children:[Object(I.jsx)("h3",{className:"loginLogo",children:"MukhBoi"}),Object(I.jsx)("span",{className:"loginDesc",children:"Connect with friends and the world aound you."})]}),Object(I.jsx)("div",{className:"loginRight",children:Object(I.jsxs)("div",{className:"loginBox",children:[Object(I.jsxs)("form",{className:"loginForm",onSubmit:C,autoComplete:"off",children:[Object(I.jsx)(m.a,{id:"outlined-basic",label:"Email",type:"email",autoComplete:"off",variant:"outlined",name:"email",onChange:w}),Object(I.jsxs)("div",{children:[Object(I.jsx)(m.a,{id:"outlined-password-input",label:"Password",type:T?"text":"password",autoComplete:"off",variant:"outlined",name:"password",onChange:w}),Object(I.jsx)(h.a,{onClick:function(){return L(!T)},control:Object(I.jsx)(O.a,{icon:Object(I.jsx)(x.a,{}),checkedIcon:Object(I.jsx)(f.a,{})})})]}),Object(I.jsx)("input",{type:"submit",value:"Log In",className:"loginButton"})]}),Object(I.jsx)(o.b,{to:"/signup",className:"loginForgot",children:"Forgot Password?"}),Object(I.jsx)("hr",{}),Object(I.jsx)("a",{className:"newRegisterButton",onClick:function(){return r(!0)},children:"Create A New Account"})]})})]})]}),Object(I.jsx)(R,{handlePopup:c,setHandlePopup:r})]})},P=(s(116),s(193)),U=s(194),D=s(195),_=s(196),M=function(){var e=Object(n.useContext)(E),t=e.user,s=e.dispatch,a=e.isFecthing,c=Object(n.useState)({}),r=Object(b.a)(c,2),i=r[0],l=r[1],u=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s({type:"USER_LOGOUT"}),e.next=3,fetch("/api/logout",{method:"get"});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,console.log(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/authUser",{method:"get"});case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,l(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p(),window.scrollTo(0,0)}),[t,a]),t?Object(I.jsxs)("section",{className:"topbarContainer",children:[Object(I.jsx)("div",{className:"topbarLeft",children:Object(I.jsx)(o.b,{to:"/",className:"logo",children:"MukhBoi"})}),Object(I.jsx)("div",{className:"topbarCenter",children:Object(I.jsxs)("div",{className:"searchBar",children:[Object(I.jsx)(P.a,{className:"searchIcon"}),Object(I.jsx)("input",{type:"text",placeholder:"Search for riend, post or video",className:"searchInput"})]})}),Object(I.jsxs)("div",{className:"topbarRight",children:[Object(I.jsxs)("div",{className:"topBarLinks",children:[Object(I.jsx)("span",{className:"topBarLink",children:"Hompage"}),Object(I.jsx)("span",{className:"topBarLink",onClick:u,children:"Logout"})]}),Object(I.jsxs)("div",{className:"topBarIcons",children:[Object(I.jsxs)("div",{className:"topBarIconItem",children:[Object(I.jsx)(U.a,{}),Object(I.jsx)("span",{className:"topBarIconBadge",children:"1"})]}),Object(I.jsxs)(o.b,{to:"/messages",className:"topBarIconItem",children:[Object(I.jsx)(D.a,{}),Object(I.jsx)("span",{className:"topBarIconBadge",children:"1"})]}),Object(I.jsxs)("div",{className:"topBarIconItem",children:[Object(I.jsx)(_.a,{}),Object(I.jsx)("span",{className:"topBarIconBadge",children:"1"})]})]}),Object(I.jsx)(o.b,{onClick:function(){return s({type:"RE_RENDER",payload:Date.now()})},to:"/profile/".concat(t),children:Object(I.jsx)("img",{src:i?i.profilePicture:"../images/noAvatar.png",alt:"Profile",className:"topBarImg"})})]})]}):null},A=s(197),H=s(198),W=s(199),G=(s(117),function(e){var t=e.user,s=Object(n.useContext)(E),a=Object(n.useState)({desc:"",file:"",src:"",alt:""}),c=Object(b.a)(a,2),r=c[0],i=c[1],o=function(e){i(Object(p.a)(Object(p.a)({},r),{},{desc:"desc"===e.target.name?e.target.value:r.desc,file:"file"===e.target.name?e.target.files[0]:r.file,src:e.target.files?URL.createObjectURL(e.target.files[0]):r.src,alt:e.target.files?e.target.files[0].name:r.alt}))},l=function(){var e=Object(d.a)(j.a.mark((function e(t){var n,a,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),(n=new FormData).append("desc",r.desc),n.append("img",r.file),e.next=6,fetch("/api/post/create",{method:"POST",heades:{"Content-Type":"application/json"},body:n});case 6:return a=e.sent,e.next=9,a.json();case 9:c=e.sent,200===a.status?(s.dispatch({type:"RE_RENDER",payload:Date.now()}),v.b.success(c.message,{style:{padding:"10px",color:"#fff",fontSize:"16px",background:"#62D346"},iconTheme:{primary:"white",secondary:"#62D346"}}),i({desc:"",file:"",src:"",alt:""})):400===a.status&&v.b.error(c.error,{style:{padding:"10px",color:"#fff",fontSize:"16px",background:"red"},iconTheme:{primary:"white",secondary:"red"}});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=Object(n.useState)({}),m=Object(b.a)(u,2),h=m[0],O=m[1],x=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/authUser",{method:"get"});case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,O(s);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){x()}),[s.isFecting]),(t=t?t._id:s.user)===h._id?Object(I.jsxs)("div",{className:"shareContainer",children:[Object(I.jsx)(v.a,{position:"top-center",reverseOrder:!1}),Object(I.jsxs)("div",{className:"shareWrapper",children:[Object(I.jsxs)("div",{className:"shareTop",children:[Object(I.jsx)("img",{style:{userSelect:"none"},className:"shareTopProfile",src:h?h.profilePicture:"../images/noProfile.png",alt:""}),Object(I.jsx)("input",{onChange:o,value:r.desc,name:"desc",className:"shareInput",type:"text",placeholder:"What's in your mind, ".concat(h.username.split(" ")[0],"?")})]}),Object(I.jsx)("hr",{className:"shareHr"}),Object(I.jsxs)("form",{enctype:"multipart/form-data",className:"shareBottom",onSubmit:l,children:[Object(I.jsxs)("div",{style:{marginBottom:r.file?"15px":"0"},className:"shareOptions",children:[Object(I.jsxs)("div",{className:"shareOption",children:[Object(I.jsxs)("label",{style:{cursor:"pointer"},htmlFor:"file",children:[Object(I.jsx)(A.a,{htmlColor:"#45BD62",className:"shareIcon"}),Object(I.jsx)("span",{className:"shareOptionText",children:"Photo"})]}),Object(I.jsx)("input",{style:{display:"none"},name:"file",type:"file",id:"file",accept:".png,.jpeg,.jpg",onChange:o})]}),Object(I.jsxs)("div",{className:"shareOption hide1",children:[Object(I.jsx)(H.a,{htmlColor:"#F02849",className:"shareIcon"}),Object(I.jsx)("span",{className:"shareOptionText",children:"Tag"})]}),Object(I.jsxs)("div",{className:"shareOption hide2",children:[Object(I.jsx)(W.a,{htmlColor:"#F8C03E",className:"shareIcon"}),Object(I.jsx)("span",{className:"shareOptionText",children:"Feelings"})]}),Object(I.jsx)("button",{type:"submit",className:"shareButton",children:"Share"})]}),Object(I.jsx)("img",{style:{maxWidth:"100%"},src:r.src,alt:r.alt})]})]})]}):null}),z=s(200),J=s(201),V=s(202),K=(s(118),[{id:1,profilePicture:"../images/person1.jpg",username:"Sajidul Islam"},{id:2,profilePicture:"../images/person2.jpg",username:"Mohammad Rakib "},{id:3,profilePicture:"../images/person3.jpg",username:"Shadman Karim "},{id:4,profilePicture:"../images/person4.jpg",username:"Mohammad Jishan "},{id:5,profilePicture:"../images/person5.jpg",username:"Mohammad Nuruddin "},{id:6,profilePicture:"../images/person6.jpg",username:"Sakib Hasan"},{id:7,profilePicture:"../images/person7.jpg",username:"Helal Uddin"},{id:8,profilePicture:"../images/person8.jpg",username:"Tohidul Alam"},{id:9,profilePicture:"../images/person9.jpg",username:"Mosheur Rahaman"},{id:10,profilePicture:"../images/person10.jpg",username:"M.H Rafi"}]),q=s(60),Q=s.n(q),Y=function(e){var t=e.post,s=e.rootUser,a=Object(n.useContext)(E).dispatch,c=Object(n.useState)(t.likes.length),r=Object(b.a)(c,2),i=r[0],l=r[1],u=Object(n.useState)(t.likes.includes(s.toString())),p=Object(b.a)(u,2),m=p[0],h=p[1],O=Object(n.useState)({}),x=Object(b.a)(O,2),f=(x[0],x[1],function(){var e=Object(d.a)(j.a.mark((function e(){var s,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!m),l(m?i-1:i+1),console.log(t._id),e.next=5,fetch("/api/post/like/".concat(t._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({isLike:m})});case 5:return s=e.sent,e.next=8,s.json();case 8:n=e.sent,console.log(s),console.log(n);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(I.jsx)("div",{className:"postContainer",children:Object(I.jsxs)("div",{className:"postWrapper",children:[Object(I.jsxs)("div",{className:"postTop",children:[Object(I.jsxs)("div",{className:"postTopLeft",children:[Object(I.jsx)(o.b,{onClick:function(){return a({type:"RE_RENDER",payload:Date.now()})},to:"/profile/".concat(t.userId._id),children:Object(I.jsx)("img",{className:"postProfileImg",src:t.userId.profilePicture,alt:"profile"})}),Object(I.jsx)(o.b,{onClick:function(){return a({type:"RE_RENDER",payload:Date.now()})},to:"/profile/".concat(t.userId._id),className:"postUsername",children:t.userId.username}),Object(I.jsx)("span",{className:"postDate",children:Q()(t.updatedAt).fromNow()})]}),Object(I.jsx)("div",{className:"postTopRight",children:Object(I.jsx)(z.a,{})})]}),Object(I.jsxs)("div",{className:"postCenter",children:[Object(I.jsx)("span",{className:"postText",children:t.desc||""}),t.img?Object(I.jsx)("img",{className:"postImg",src:t.img,alt:"image"}):null]}),Object(I.jsxs)("div",{className:"postBottom",children:[Object(I.jsxs)("div",{className:"postBottomLeft",children:[m?Object(I.jsx)(J.a,{style:{color:"#1877f2"},className:"likeButton",onClick:f}):Object(I.jsx)(V.a,{className:"likeButton",onClick:f}),Object(I.jsxs)("div",{className:"likeCounter",children:[i," peoples like it"]})]}),Object(I.jsx)("div",{className:"postBottomRight",children:Object(I.jsxs)("span",{className:"postCommentText",children:[t.comment," comment"]})})]})]})})},X=(s(120),function(e){var t=e.user,s=Object(n.useContext)(E).isFecthing,a=Object(n.useState)({postss:[],rootUser:""}),c=Object(b.a)(a,2),r=c[0],i=c[1],o=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/post/all/timeline",{method:"get",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,200===t.status?i({postss:s.data,rootUser:s.rootUser}):localStorage.removeItem("myToken");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[s]),Object(I.jsx)("div",{className:"feedContainer",children:Object(I.jsxs)("div",{className:"feedWrapper",children:[Object(I.jsx)(G,{user:t}),t?r.postss.filter((function(e){return e.userId._id===t._id})).length?Object(I.jsxs)("div",{children:[" ",r?r.postss.filter((function(e){return e.userId._id===t._id})).map((function(e){return Object(I.jsx)(Y,{post:e,rootUser:r.rootUser},e._id)})):Object(I.jsx)("h1",{children:"Loading"})]}):Object(I.jsx)("h1",{style:{textAlign:"center"},children:"No Post Is Created...\ud83d\ude2a"}):r?r.postss.map((function(e){return Object(I.jsx)(Y,{post:e,rootUser:r.rootUser},e._id)})):Object(I.jsx)("h1",{children:"Loading"})]})})}),Z=(s(121),function(e){var t=e.user;return Object(I.jsxs)("li",{className:"rightbarFriend",children:[Object(I.jsxs)("div",{className:"rightbarProfileImagContainer",children:[Object(I.jsx)("img",{className:"rightbarProfileImg",src:t.profilePicture,alt:""}),Object(I.jsx)("span",{className:"rightbarOnline"})]}),Object(I.jsx)("span",{className:"rightbarUsername",children:t.username})]})}),$=s(203),ee=s(204),te=function(e){var t=e.userId,s=Object(n.useContext)(E),a=s.user,c=s.dispatch,r=s.isFecthing,i=Object(n.useState)([]),o=Object(b.a)(i,2),l=o[0],u=o[1],p=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/api/get/following",{method:"get"});case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,console.log(s),u(s.message);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(j.a.mark((function e(s){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/".concat(t.id,"/").concat(s),{method:"PATCH"});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,console.log(a),c({type:"RE_RENDER",payload:Date.now()});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[r]),Object(I.jsx)("div",{children:t.id!==a?l.includes(t.id)?Object(I.jsxs)("span",{onClick:function(){return m("unfollow")},class:"followButton",style:{background:"#ff3434"},children:["Unfollow ",Object(I.jsx)(ee.a,{})]}):Object(I.jsxs)("span",{onClick:function(){return m("follow")},class:"followButton",children:["FOLLOW ",Object(I.jsx)($.a,{})]}):null})},se=function(){return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("div",{className:"birthdayContainer",children:[Object(I.jsx)("img",{className:"birthdayImg",src:"./images/gift.png",alt:""}),Object(I.jsxs)("span",{className:"birthdayText",children:[Object(I.jsx)("b",{children:"Tohid"})," and ",Object(I.jsx)("b",{children:"3 other friends"})," have a birthday today"]})]}),Object(I.jsx)("img",{src:"./images/add.png",alt:"",className:"rightbarAd"}),Object(I.jsx)("h4",{className:"rightbarTitle",children:"Online Friends"}),Object(I.jsx)("ul",{className:"rightbarFriendList",children:K.map((function(e){return Object(I.jsx)(Z,{user:e},e.id)}))})]})},ne=function(e){var t=e.userId,s=Object(n.useContext)(E),a=(s.user,s.dispatch),c=s.isFecting,r=Object(i.h)().pathname,l=Object(n.useState)([]),u=Object(b.a)(l,2),p=u[0],m=u[1],h=Object(n.useState)([]),O=Object(b.a)(h,2),x=(O[0],O[1]),f=function(){var e=Object(d.a)(j.a.mark((function e(){var s,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/api/friends/".concat(t.id),{method:"get"});case 2:return s=e.sent,e.next=5,s.json();case 5:return n=e.sent,e.next=8,m(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/api/get/following",{method:"get"});case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,x(s.message),a({type:"RE_RENDER",payload:Date.now()});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){f(),g()}),[c,r]),Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(te,{userId:t}),Object(I.jsx)("h4",{className:"rightbarTitle",children:"User Information"}),Object(I.jsxs)("div",{className:"rightbarInfo",children:[Object(I.jsxs)("div",{className:"rightbarInfoItem",children:[Object(I.jsx)("span",{className:"rightbarInfoKey",children:"City:"}),Object(I.jsx)("span",{className:"rightbarInfoValue",children:"Rawzan"})]}),Object(I.jsxs)("div",{className:"rightbarInfoItem",children:[Object(I.jsx)("span",{className:"rightbarInfoKey",children:"From:"}),Object(I.jsx)("span",{className:"rightbarInfoValue",children:"Bangladesh"})]}),Object(I.jsxs)("div",{className:"rightbarInfoItem",children:[Object(I.jsx)("span",{className:"rightbarInfoKey",children:"Relationsip:"}),Object(I.jsx)("span",{className:"rightbarInfoValue",children:"Single"})]})]}),Object(I.jsxs)("h4",{className:"rightbarTitle",children:["User Friends(",p.length,")"]}),Object(I.jsx)("div",{className:"rightbarFollowings",children:p?p.map((function(e){return Object(I.jsxs)(o.b,{onClick:function(){return a({type:"RE_RENDER",payload:Date.now()})},to:"/profile/".concat(e._id),className:"rightbarFollowing",children:[Object(I.jsx)("img",{className:"rightbarFollwingImg",src:e.profilePicture,alt:""}),Object(I.jsx)("span",{className:"rightbarFollowingName",children:e.username})]})})):Object(I.jsx)("h1",{children:"Loading..."})})]})},ae=function(e){var t=e.profile,s=e.userId;return Object(I.jsx)("div",{className:"rightbarContainer",children:Object(I.jsx)("div",{className:"rightbarWrapper",children:t?Object(I.jsx)(ne,{userId:s}):Object(I.jsx)(se,{})})})},ce=(s(122),s(205)),re=s(206),ie=s(207),oe=s(208),le=s(209),je=s(210),de=s(211),ue=s(212),pe=s(213),be=function(e){var t=e.user;return Object(I.jsxs)("li",{className:"sidebarFriend",children:[Object(I.jsx)("img",{src:t.profilePicture,alt:"",className:"sidebarFriendImg"}),Object(I.jsx)("span",{className:"sidebarFriendName",children:t.username})]})},me=function(){return Object(I.jsx)("div",{className:"sidebarContainer",children:Object(I.jsxs)("div",{className:"sidebarWrapper",children:[Object(I.jsxs)("ul",{className:"sidebarList",children:[Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(ce.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Feed"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(re.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Chats"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(ie.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Videos"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(oe.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Groups"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(le.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Bookmarks"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(je.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Questions"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(de.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Jobs"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(ue.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Events"})]}),Object(I.jsxs)("li",{className:"sidebarListItem",children:[Object(I.jsx)(pe.a,{className:"sidebarIcon"}),Object(I.jsx)("span",{className:"sidebarListItemText",children:"Courses"})]})]}),Object(I.jsx)("button",{className:"sidebarButton",children:"Show More"}),Object(I.jsx)("hr",{className:"sidebarHr"}),Object(I.jsx)("ul",{className:"sidebarFriendList",children:K.map((function(e){return Object(I.jsx)(be,{user:e},e.id)}))})]})})},he=(s(71),function(){return Object(I.jsxs)("div",{className:"homeContainer",children:[Object(I.jsx)(F.a,{children:Object(I.jsx)("title",{children:"Home | MukhBoi"})}),Object(I.jsx)(me,{}),Object(I.jsx)(X,{}),Object(I.jsx)(ae,{})]})}),Oe=(s(123),function(){var e=Object(i.h)().pathname,t=Object(n.useContext)(E),s=(t.user,t.isFecthing),a=Object(i.g)(),c=Object(n.useState)([]),r=Object(b.a)(c,2),o=r[0],l=r[1],u=Object(i.i)(),p=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/api/profile/".concat(u.id),{method:"get",headers:{"Content-Type":"application/json"}});case 2:return t=e.sent,e.next=5,t.json();case 5:s=e.sent,200===t.status?l(s):a.push("/login");case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){p()}),[s,e]),o.currentUser?Object(I.jsxs)("div",{className:"profileContainer",children:[Object(I.jsx)(me,{}),Object(I.jsxs)("div",{className:"profileRight",children:[Object(I.jsxs)("div",{className:"profileRightTop",children:[Object(I.jsxs)("div",{className:"profileCover",children:[Object(I.jsx)("img",{className:"profileCoverImg",src:o.currentUser.coverPicture,alt:""}),o.currentUser.profilePicture?Object(I.jsx)("img",{className:"profileUserImg",src:o.currentUser.profilePicture,alt:"profile"}):Object(I.jsx)("div",{})]}),Object(I.jsxs)("div",{className:"profileInfo",children:[Object(I.jsx)("h4",{className:"profileInfoName",children:o.currentUser.username}),Object(I.jsx)("span",{className:"profileInfoDesc",children:"Hello My Friends"})]})]}),Object(I.jsxs)("div",{className:"profileRightBottom",children:[Object(I.jsx)(X,{user:o.currentUser}),Object(I.jsx)(ae,{userId:u,profile:!0})]})]})]}):Object(I.jsx)("h1",{children:"Loading"})}),xe=function(e){return Object(n.useContext)(E).token?Object(I.jsx)(i.b,{path:e.path,exact:e.exact,component:e.component}):Object(I.jsx)(i.a,{to:"/login"})},fe=function(e){var t=Object(n.useContext)(E);t.user;return t.token?Object(I.jsx)(i.a,{to:"/"}):Object(I.jsx)(i.b,{path:e.path,exact:e.exact,component:e.component})},ge=s(95),ve=(s(124),s(125),function(e){var t=e.conversation,s=e.currentUser,a=Object(n.useState)([]),c=Object(b.a)(a,2),r=c[0],i=c[1],o=t.members.find((function(e){return e!==s})),l=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/user/"+o,{method:"get"});case 3:return t=e.sent,e.next=6,t.json();case 6:s=e.sent,i(s.user),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[s,t]),Object(I.jsxs)("div",{className:"conversationContainer",children:[Object(I.jsx)("img",{className:"conversationImg",src:r.profilePicture,alt:""}),Object(I.jsx)("span",{className:"coversationName",children:r.username})]})}),Ne=(s(126),function(e){var t=e.message,s=e.own;return Object(I.jsxs)("div",{className:"message ".concat(s),children:[Object(I.jsxs)("div",{className:"messageTop",children:[Object(I.jsx)("img",{className:"messageImg",src:"../images/person5.jpg",alt:""}),Object(I.jsx)("p",{className:"messageText",children:null===t||void 0===t?void 0:t.text})]}),Object(I.jsx)("div",{className:"messageBottom",children:Q()(null===t||void 0===t?void 0:t.createdAt).fromNow()})]})}),ye=s(214),Ie=(s(127),function(e){var t=e.onlineUsers,s=e.user,a=Object(n.useState)([]),c=Object(b.a)(a,2),r=c[0],i=c[1],o=function(){var e=Object(d.a)(j.a.mark((function e(){var n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/api/friends/".concat(s),{method:"get"});case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,console.log(a),i(null===a||void 0===a?void 0:a.filter((function(e){return null===t||void 0===t?void 0:t.includes(e._id)})));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){o()}),[]),console.log(r,t,s),Object(I.jsx)(I.Fragment,{children:r.map((function(e){return Object(I.jsx)("div",{className:"chatOnlineFriends",children:Object(I.jsxs)("div",{className:"chatOnlineFriend",children:[Object(I.jsxs)("div",{className:"chatOnlineImgContainer",children:[Object(I.jsx)("img",{className:"chatOnlineImg",src:e.profilePicture,alt:""}),Object(I.jsx)("span",{className:"chatOnlineBadge"})]}),Object(I.jsx)("div",{className:"chatOnlineUsername",children:e.username})]})})}))})}),we=s(94),Ce=Object(we.io)("http://localhost:5000"),ke=function(){var e=Object(i.i)().id,t=Object(n.useRef)(),s=Object(n.useState)(),a=Object(b.a)(s,2),c=a[0],r=a[1],l=Object(n.useState)(e),u=Object(b.a)(l,2),p=u[0],m=u[1],h=Object(n.useState)([]),O=Object(b.a)(h,2),x=O[0],f=O[1],g=Object(n.useState)(),v=Object(b.a)(g,2),N=v[0],y=v[1],w=Object(n.useState)(),C=Object(b.a)(w,2),k=C[0],S=C[1],T=Object(n.useState)(),L=Object(b.a)(T,2),R=L[0],B=L[1],P=Object(n.useContext)(E),U=P.user,D=P.isFecthing,_=P.dispatch,M=function(){var e=Object(d.a)(j.a.mark((function e(t){var s,n,a;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!N.trim()){e.next=12;break}return s={senderId:U,text:N,conversationId:p},n=null===c||void 0===c?void 0:c.find((function(e){return e._id===p})).members.find((function(e){return e!==U})),Ce.emit("sendMessage",{senderId:U,receiverId:n,text:N}),e.next=7,fetch("/api/messages",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 7:return a=e.sent,e.next=10,a.json();case 10:e.sent,200===a.status&&(_({type:"RE_RENDER",payload:Date.now()}),y(""));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/conversation/"+U,{method:"get"});case 3:return t=e.sent,e.next=6,t.json();case 6:s=e.sent,r(s.message),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),H=function(){var e=Object(d.a)(j.a.mark((function e(){var t,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/messages/"+p,{method:"get"});case 3:return t=e.sent,e.next=6,t.json();case 6:s=e.sent,f(s.message),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){A(),H(),setTimeout((function(){var e;null===(e=t.current)||void 0===e||e.scrollIntoView({behaviour:"smooth"})}),500)}),[D]),Object(n.useEffect)((function(){Ce.emit("addUser",U),Ce.on("getUsers",(function(e){var t;console.log(e),S(null===e||void 0===e||null===(t=e.map((function(e){return e.userId})))||void 0===t?void 0:t.filter((function(e){return e!==U})))})),Ce.on("getMessage",(function(e){B({senderId:e.senderId,text:e.text,createddAt:Date.now()})}))}),[Ce]),Object(n.useEffect)((function(){var e;console.log(R),R&&(null===c||void 0===c||null===(e=c.members)||void 0===e||e.includes(R.senderId)),(null===x||void 0===x?void 0:x.length)&&f([].concat(Object(ge.a)(x),[R])),_({type:"RE_RENDER",payload:Date.now()})}),[R]),Object(I.jsxs)("div",{children:[Object(I.jsx)(F.a,{children:Object(I.jsx)("title",{children:"Messages | MukhBoi"})}),Object(I.jsxs)("div",{className:"messengerContainer",children:[Object(I.jsx)("div",{className:"chatMenu",children:Object(I.jsxs)("div",{className:"chatMenuWrapper",children:[Object(I.jsx)("h2",{className:"chatLogo",children:"Chat"}),Object(I.jsx)("input",{className:"searchMessenger",type:"text",placeholder:"Search Messenger"}),c?c.length>=1?c.map((function(e){return Object(I.jsx)(o.c,{activeClassName:"navActive",to:"/messages/".concat(e._id),onClick:function(){m(e._id),y(""),_({type:"RE_RENDER",payload:Date.now()})},children:Object(I.jsx)(ve,{currentUser:U,conversation:e})})})):Object(I.jsx)("h2",{style:{color:"gray",userSelect:"none"},children:"No user found! Search Your Friends...\ud83e\udd37\u200d\u2640\ufe0f"}):Object(I.jsx)("h1",{children:"Loading..."})]})}),Object(I.jsx)("div",{className:"chatBox",children:p?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("div",{className:"chatBoxTop",children:Object(I.jsxs)("div",{className:"messageTopWrapper",children:[Object(I.jsx)("img",{className:"messageTopImg",src:"../images/person5.jpg",alt:""}),Object(I.jsxs)("div",{className:"messageTopInfo",children:[Object(I.jsx)("span",{className:"messageTopName",children:"Sajidul Islam"}),Object(I.jsx)("span",{className:"messageTopStatus",children:"Active Now"})]})]})}),Object(I.jsx)("div",{className:"messages",children:x?x.length?x.map((function(e,s){return Object(I.jsx)("div",{ref:t,children:Object(I.jsx)(Ne,{message:e,own:(null===e||void 0===e?void 0:e.senderId)===U?"own":""},s)})})):Object(I.jsx)("h1",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:"No message\ud83d\ude2a"}):Object(I.jsx)("h1",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:"Loading..."})}),Object(I.jsx)("div",{className:"chatBoxBottom",children:Object(I.jsxs)("form",{onSubmit:M,children:[Object(I.jsx)("input",{onChange:function(e){return y(e.target.value)},value:N,className:"chatBoxInput",type:"text",placeholder:"Type Message..."}),Object(I.jsx)("label",{htmlFor:"submit",children:Object(I.jsx)(ye.a,{className:"submitButton"})}),Object(I.jsx)("input",{style:{display:"none"},type:"submit",id:"submit"})]})})]}):Object(I.jsx)("span",{className:"noChatUser",children:"Please select a user to start the conversation...\ud83d\ude10"})}),Object(I.jsx)("div",{className:"chatOnline",children:Object(I.jsxs)("div",{className:"chatOnlineWrappper",children:[Object(I.jsx)("h3",{children:"Online Users"}),Object(I.jsx)(Ie,{onlineUsers:k,user:U})]})})]})]})},Se=function(){return Object(I.jsxs)("div",{children:[Object(I.jsx)(F.a,{children:Object(I.jsx)("title",{children:"404 | Page not found"})}),Object(I.jsx)("h1",{style:{marginTop:"10rem",fontSize:"4rem",textAlign:"center"},children:"404...Oops!!! Page is not found"})]})},Te=function(){var e=Object(i.h)().pathname;return Object(n.useEffect)((function(){window.scrollTo(0,0)}),[e]),null};var Ee=function(){return Object(I.jsxs)(o.a,{children:[Object(I.jsx)(Te,{}),Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)(M,{}),Object(I.jsxs)(i.d,{children:[Object(I.jsx)(xe,{exact:!0,path:"/",component:he}),Object(I.jsx)(xe,{exact:!0,path:"/profile/:id",component:Oe}),Object(I.jsx)(xe,{exact:!0,path:"/messages/:id?",component:ke}),Object(I.jsx)(fe,{exact:!0,path:"/login",component:B}),Object(I.jsx)(i.b,{exact:!0,component:Se})]})]})]})};r.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(L,{children:Object(I.jsx)(Ee,{})})}),document.getElementById("root"))},71:function(e,t,s){}},[[158,1,2]]]);
//# sourceMappingURL=main.7853e680.chunk.js.map